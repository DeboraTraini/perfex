workflows:
  ios-release-build:
    name: iOS Release Build
    environment:
      vars:
        BUNDLE_ID: "com.perfex.admin"
        CERTIFICATE_PASSWORD: $CERTIFICATE_PASSWORD
      groups:
        - ios_signing_group
      ios_signing:
        certificate_base64: $P12_BASE64
        certificate_password: $CERTIFICATE_PASSWORD
        provisioning_profile_base64: $MOBILEPROVISION_BASE64
        profile_reference: Horizone_AdHoc_Profile
        target: Runner
    scripts:
      - name: Install dependencies
        script: |
          flutter pub get
      - name: Build iOS
        script: |
          flutter build ios --release
    artifacts:
      - build/ios/ipa/*.ipa
